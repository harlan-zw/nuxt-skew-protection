---
title: Configuration
description: Complete configuration reference for Nuxt Skew Protection.
---

Complete configuration options for `nuxt.config.ts`.

## Basic Configuration

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['nuxt-skew-protection'],

  skewProtection: {
    // Your configuration here
  }
})
```

## Options

### `enabled: boolean`{lang="ts"}

- Default: `true`{lang="ts"}

Enable or disable the module.

```ts
skewProtection: {
  enabled: process.env.NODE_ENV === 'production'
}
```

### `storage: StorageOptions`{lang="ts"}

- Default: `{ driver: 'fs', base: 'node_modules/.cache/nuxt/skew-protection' }`{lang="ts"}

Storage configuration for version assets and metadata. Required for production.

```ts
export default defineNuxtConfig({
  skewProtection: {
    storage: {
      driver: 'fs', // or 'redis', 's3', 'cloudflare-kv-binding', etc.
      // Driver-specific options
    }
  }
})
```

See [Storage Configuration](/docs/skew-protection/guides/storage-configuration) for all drivers.

### `checkForUpdateStrategy: 'polling' | 'sse' | 'ws'`{lang="ts"}

- Default: Auto-detected based on platform

Strategy for checking for version updates.

```ts
skewProtection: {
  checkForUpdateStrategy: 'sse'
}
```

**Auto-detection:**

- Static sites → `'polling'`
- Cloudflare Durable → `'ws'`
- Node.js/Bun/Deno → `'sse'`

See [Update Strategies](/docs/skew-protection/guides/update-strategies) for details.

### `retentionDays: number`{lang="ts"}

- Default: `30`{lang="ts"}

How many days to keep old versions before cleanup.

```ts
skewProtection: {
  retentionDays: 7 // Keep versions for 7 days
}
```

### `maxNumberOfVersions: number`{lang="ts"}

- Default: `10`{lang="ts"}

Maximum number of versions to retain.

```ts
skewProtection: {
  maxNumberOfVersions: 5 // Keep max 5 versions
}
```

Cleanup happens during build. Oldest versions are removed first.

### `cookie: CookieOptions`{lang="ts"}

- Default: See below

Cookie configuration for storing deployment version.

```ts
export default defineNuxtConfig({
  skewProtection: {
    cookie: {
      name: '__nkpv',
      path: '/',
      sameSite: 'strict',
      maxAge: 60 * 60 * 24 * 60 // 60 days
    }
  }
})
```

### `bundlePreviousDeploymentChunks: boolean`{lang="ts"}

- Default: `true`{lang="ts"}

Bundle previous deployment chunks to support users on old versions. When enabled, old build assets are stored and served to users who haven't refreshed.

```ts
skewProtection: {
  bundlePreviousDeploymentChunks: true
}
```

::note
Automatically disabled when using CDN URL.
::

### `debug: boolean`{lang="ts"}

- Default: `false`{lang="ts"}

Enable debug logging.

```ts
skewProtection: {
  debug: true
}
```

Logs version changes, asset operations, module invalidations, and storage operations.
